name: Commit Message Check

on:
  pull_request:
    branches:
      - main

jobs:
  validate-commit-messages:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Code
        uses: actions/checkout@v4
      #shell commends 
      - name: Validate Commit Messages
        run: |
               # Get the commit messages in the PR
               commits=$(git log origin/main..HEAD --pretty=format:"%s")
               echo "Validating the following commit messages:"
               echo "$commits"
               
               # Define silly or unacceptable patterns
               invalid_patterns=("fix stuff" "fix things" "stuff" "things" "it works" "changes" "minor changes" "update" "quick fix" "debugging" "temp" "asdf" "qwerty" "foobar" "blah" "blah blah" "random" "whatever" "misc" "test" "tests" "test commit" "trying something" "checking" "experiment" "trial" "wip" "work in progress" "incomplete" "placeholder" "draft" "todo" "1234" "5678" "9999" "0000" "1 2 3" ":)" ":(" "🔥" "💩" "¯\\_(ツ)_/¯" "fixed a bug" "fixed an issue" "some fixes" "some updates" "various updates" "final changes" "last try" "done" "oops" "typo" "small fix" "fix" "update" "add" "delete" "remove")
               
               for commit in $commits; do
               echo "Checking commit: $commit"
               
               if [[ ${#commit} -lt 10 ]]; then
               echo "❌ Commit message is too short: $commit"
               exit 1
               fi
               
               for pattern in "${invalid_patterns[@]}"; do
               if [[ "$commit" == *"$pattern"* ]]; then
               echo "❌ Commit message contains prohibited pattern '$pattern': $commit"
               exit 1
               fi
               done
               done
               
               echo "✅ All commit messages are valid!"

